{% extends "layout.html" %}
{% block links %}
{% endblock %}
{% block title %}

<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.js"></script>

<script>

	$(document).ready(function(){
		var myArr = new Array();
		$.ajax({
			type : "GET",
			url : "static/xml/new_cities.xml",
			dataType : "xml",
			success : parseXml,
			complete : doAuto,
			error : function(){
				alert("Couldn't find XML");
				}
			});
		//function finds elements named menuitem, finds that menuitems
		//titlecity and adds that titlecity to the myArr array object
		function parseXml(xml){
			$(xml).find('menuitem').each(function(){
				var val = $(this).find('titlecity').text();
				myArr.push(val);
			});
		}	
		
	
		function doAuto(){
			$("input#start").autocomplete({
				source: myArr,
				minLength: 1,
				keypress: function(event, ui){
					$("input#start").val(ui.item.value);
				}
			});
			
			$("input#end").autocomplete({
				source: myArr,
				minLength: 1,
				keypress: function(event,ui){
					$("input#end").val(ui.item.value);
				}
			});
			
		}
	});

	$(function()	{
		$("#date").datepicker();
	});
</script>

{% endblock %}

{% block body %}
<body>
<div class="welcome">
	<p id="welcome">Fill the below and then choose one of our options.</p>
</div>
<br><br>


<div class="mainform">
	<form method="POST" id="searchForm">
		<label>Start:
		<input type="text" name="start" id="start" />
		</label>
		<br>
		<label>End:
		<input type="text" name="end" id="end" />
		</label>
		<br>
		<label>Date of departure:
		<input type="dropdown" size="5" name="date" id="date" />
		</label>
		<div class="error">
		<p style="color:red">{{error}}</p>
		</div>
		<input type="submit" value="Generate Options">
	</form>
</div>

<br>
{% autoescape false %}
{% if response %}
<div class="options">
{{response}}
</div>	

{% endif %}
{% endautoescape %}


{% endblock %}
</body>
